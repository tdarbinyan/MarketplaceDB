**В двух словах:**

Данная база данных предназначена для хранения информации о пользователях онлайн маркетплейса. Эти данные могут быть использованы для оптимизации работы маркетплейса, улучшения пользовательского опыта, управления продажами и анализа тенденций в поведении пользователей. База данных состоит из нескольких таблиц, которые связаны между собой ключевыми полями и предоставляют возможность получить полную информацию о каждом пользователе и его активности на платформе.

Нормальная форма: 2NF

**Сущности:**

Сущность **‘user’** Версионирование: **SCD1**



|Название|Тип данных|Описание|
| - | - | - |
|id [primary\_key]|integer|Уникальный идентификатор|
|name|varchar(50)|Имя пользователя|
|email|varchar(100)|Электронная почта пользователя|
|password|varchar(100)|Хэш пароль пользователя|
|address|varchar(100)|Адрес пользователя|

Сущность **‘order’**

Версионирование: **SCD4 (для работы с возвратами) **



|Название|Тип данных|Описание|
| - | - | - |
|id [primary\_key]|integer|Уникальный идентификатор|
|user\_id|integer|Идентификатор пользователя|
|status|varchar(20)|Статус заказа|
|date|timestamp|Дата и время заказа|

Сущность **‘product’**

Версионирование: **SCD4 (с целью защиты потребителя от потенциального мошенничества будем хранить историю изменения цены/описания с id)**



|Название|Тип данных|Описание|
| - | - | - |
|id [primary\_key]|integer|Уникальных идентификатор|
|name|varchar(100)|Название товара|
|description|text|Описание товара|
|price|numeric(10, 2)|Цена товара|
|available\_quantity|integer|Количество доступных на складе товаров|

Сущность **‘order\_product’ Версионирование: SCD1**



|Колонка|Тип данных|Описание|
| - | - | - |
|order\_id [primary\_key]|integer|Идентификатор заказа|
|product\_id|integer|Идентификатор продукта в заказе|
|quantity|integer|Количество продукта в заказе|
|price\_per\_unit|numeric(10, 2)|Цена продукта в заказе|

**user.id** связан с **order.user\_id**

**order.id** связан с **order\_product.order\_id product.id** связан с **order\_product.product\_id**

Пример функционального применения -получение списка продуктов в заказе указанием их цены:

SELECT 

p.name,

op.quantity,

op.price\_per\_unit,

(op.quantity \* op.price\_per\_unit) AS total\_price 

FROM products p 

JOIN orders\_products op ON p.id = op.product\_id 

WHERE op.order\_id = 123;

**Диаграмма для показа связи сущностей:**

![](docs/conceptual-model.png)
